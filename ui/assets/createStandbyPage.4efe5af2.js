import{A as e}from"./api_dbManage.a8594560.js";import{n as a,D as t}from"./index.e6909a03.js";import{a as s,h as r,b as i}from"./verificationRules.28629627.js";import"./index.dfdb83b1.js";import"./vendor.194c4086.js";import"./bus.d56574c1.js";const n={};var o=a({name:"baseInfo",data(){return{language:"",loading_pgdata:!1,loading_port:!1,savePort:"",master_db:{},src_db:{},pg_bin_path_list:[],loadingOsInfo:!1,loading_version:!1,isValidateName_standby:"",os_uid_disabled:!1,standbyDbFormVisible:!1,standbyDbForm:{tblspc_dir:[],host:"",instance_name:"",pg_user:"postres",os_user:"pg1922",port:1922,pgdata:"/data/pg1922"},standbyDbFormRules:{instance_type:[{required:!0,trigger:"change"}],os_user:[{required:!0,message:this.$t("createDatabasePage.yunxing-shujuku-yonghu-message"),trigger:"blur"}],os_uid:[{required:!0,message:this.$t("createDatabasePage.yunxing-yunhu-UID-message"),trigger:"blur"},{type:"number",message:this.$t("createDatabasePage.UID-bixuwei-zhuzizhi")}],pg_bin_path:[{required:!0,message:this.$t("createDatabasePage.bixu-xuanze-youxiao-raunjianmulu"),trigger:"blur"}],sync:[{required:!0,trigger:"change"}],instance_name:[{message:this.$t("defineDatabasePage.qingshuru-shujujku-mingcheng"),trigger:"blur"}],host:[{required:!0,message:this.$t("createDatabasePage.qingxuanze-zhuji-IP"),trigger:"change"}],pgdata:[{required:!0,message:this.$t("defineDatabasePage.qingshuru-shuju-mulu"),trigger:"blur"},{required:!0,validator:s,trigger:"blur"},{required:!0,validator:(a,t,s)=>{if(""===t)s(new Error(this.$t("verificationRules.qingshuru-shuji-mulu")));else{if(!this.standbyDbForm.host)return s(this.$t("createDatabasePage.xuanzezhuji-kechakan-message"));{let a={host:this.standbyDbForm.host,pgdata:t};this.loading_pgdata=!0,e.checkTheDirIsEmpty(a).then((e=>(this.loading_pgdata=!1,1==e.is_empty?s():0==e.is_empty?s(new Error(this.$t("verificationRules.gaishuju-mulu-m"))):s(new Error(e.err_msg)))),(e=>(this.loading_pgdata=!1,s(new Error(this.$t("verificationRules.jiancha-qingqiu-chucuo"))))))}}},trigger:"submit"}],old_dir:[{required:!1,validator:r,trigger:"blur"}],new_dir:[{required:!1,validator:r,trigger:"blur"}],delay:[{type:"number",message:this.$t("createStandbyPage.yanchi-bixu")}],other_param:[{required:!0,message:this.$t("createStandbyPage.qingshuru-other_param"),trigger:"blur"}],repl_user:[{required:!0,message:this.$t("createStandbyPage.qingshuru-shujuku-message"),trigger:"blur"}],repl_pass:[{required:!0,message:this.$t("createStandbyPage.qingshuru-shujuku-zhongde-message"),trigger:"blur"}],repl_ip:[{required:!0,validator:(e,a,t)=>{let s=this;if(a){let e=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,r=a.split(",");for(let a=0;a<r.length;a++)if(!1===e.test(r[a]))return t(new Error(this.$t("createStandbyPage.IP-dizhi-buguifan-message")));return a==s.standbyDbForm.primary_repl_ip?t(new Error(this.$t("createStandbyPage.beiku-fuzhi-ip-message"))):t()}return t(new Error(this.$t("createStandbyPage.qingshuru-IP-dizhi")))},trigger:"blur"},{required:!0,message:this.$t("createStandbyPage.qingshuru-beiku-fuzhi-ip"),trigger:"blur"}],port:[{required:!0,message:this.$t("createDatabasePage.qingshuru-duankouhao"),trigger:"blur"},{required:!0,validator:i,trigger:"blur"},{type:"number",message:this.$t("defineDatabasePage.duankou-bixuwei-shuzizhi")},{required:!0,validator:(a,t,s)=>{if(""==this.standbyDbForm.port)return s();let r={host:this.standbyDbForm.host,port:t};this.loading_port=!0,e.checkPortIsUsed(r).then((e=>(this.loading_port=!1,0==e.err_code?0==e.is_used?s():s(new Error(this.$t("verificationRules.gaiduankou-yibei-m"))):s(new Error(e.err_msg)))),(function(e){return this.loading_port=!1,s(new Error(this.$t("verificationRules.jiancha-qingqiu-chucuo")))}))},trigger:"submit"}]},curHostOptions:[],memMax:2048,cupMemMax:32,loading:!1,databaselistDatas:[],showtype:!1,spareDataType:"standby",pgUser:""}},props:{databaseId:{required:!0},databaselistData:{required:!0},databaseInfo:{required:!0}},watch:{"standbyDbForm.host":{handler(e,a){if("undefined"!=e&&""!=e){let a=this;if(this.memMax=this.curHostOptions.find((a=>a.ip===e)).mem_size,null!=this.curHostOptions.find((a=>a.ip===e)).cpu&&"docker"==standbyDbForm.instance_type?a.cupMemMax=this.curHostOptions.find((a=>a.ip===e)).cpu:a.cupMemMax=32,this.memMax<64)return this.$message({type:"error",message:this.$t("createDatabasePage.gaizhuji-shengyu-message")})}}},"standbyDbForm.cpu":{handler(e,a){if(this.curHostOptions.find((a=>a.cpu===e))&&(this.memMax=this.curHostOptions.find((a=>a.ip===e)).mem_size),this.memMax<64)return this.$message({type:"error",message:this.$t("createDatabasePage.gaizhuji-shengyu-message")})}}},mounted(){const a=this;a.language=localStorage.getItem("language_clup"),this.standbyDbFormVisible=!1,e.getPgFamilyInfo().then((function(e){a.pgUser=e.pg_family_user,a.standbyDbDialog(a.databaseId),a.databaselistDatas=a.databaselistData,a.standbyDbFormRules.host.push({required:!0,validator:a.validHost,trigger:"change"}),a.standbyDbFormRules.os_user.push({required:!0,validator:a.validOsUser,trigger:"blur"}),a.standbyDbFormRules.os_uid.push({required:!0,validator:a.validOsUid,trigger:"blur"}),a.standbyDbFormRules.pg_bin_path.push({required:!0,validator:a.validPgBinPath,trigger:"change"})}))},methods:{validOsUser(a,t,s){const r=this;if(""==r.standbyDbForm.os_user)return void s();let i={host:r.standbyDbForm.host,user:t};r.loadingOsInfo=!0,e.checkOsUserExists(i).then((e=>{r.loadingOsInfo=!1,0==e.err_code?0==e.exists?(r.os_uid_disabled=!1,r.standbyDbForm.create_os_user=!0,r.standbyDbForm.os_uid&&r.$refs.standbyDbForm.validateField("os_uid"),s()):(r.os_uid_disabled=!0,r.standbyDbForm.create_os_user=!1,r.$refs.standbyDbForm.clearValidate("os_uid"),r.$set(r.standbyDbForm,"os_uid",e.exists),s()):s(new Error(e.err_msg))}),(function(e){s(new Error(e)),r.loadingOsInfo=!1}))},validHost(a,t,s){const r=this;if(""==r.standbyDbForm.host)return void s();let i={host:r.standbyDbForm.host};r.loading_pg_bin_path_list=!0,e.getPgBinPathList(i).then((e=>{r.loading_pg_bin_path_list=!1,r.pg_bin_path_list=e,s()}),(function(e){s(new Error(e)),r.loading_pg_bin_path_list=!1}))},validOsUid(a,t,s){const r=this;if(""==r.standbyDbForm.os_uid)return void s();if(r.os_uid_disabled)return void s();let i={host:r.standbyDbForm.host,os_uid:t};r.loadingOsInfo=!0,e.checkOsUidExists(i).then((e=>{r.loadingOsInfo=!1,0==e.err_code?0==e.exists||r.os_uid_disabled?s():s(new Error(this.$t("createDatabasePage.yonghu-uid")+t+this.$t("createDatabasePage.yicunzai"))):s(new Error(e.err_msg))}),(function(e){s(new Error(e)),r.loadingOsInfo=!1}))},validPgBinPath(a,t,s){const r=this;if(""==r.standbyDbForm.host)return void s();let i={host:r.standbyDbForm.host,pg_bin_path:r.standbyDbForm.pg_bin_path};r.loading_version=!0,e.getPgBinVersion(i).then((e=>{0==e.err_code?(this.$set(r.standbyDbForm,"version",e.version),s()):s(new Error(e.err_msg)),r.loading_version=!1}),(function(e){r.loading_version=!1,s(new Error(e))}))},addTableSpace(){this.standbyDbForm.tblspc_dir.push({old_dir:"",new_dir:"",check:!0})},changeStandByIP(){this.standbyDbForm.standby_repl_ip=this.standbyDbForm.host,this.standbyDbForm.pgdata&&this.$refs.standbyDbForm.validateField("pgdata")},delTblSpc(e){this.standbyDbForm.tblspc_dir.splice(e,1)},validateNameFn(e,a){this.databaselistDatas.find((a=>a.instance_name===e))?this["isValidateName_"+a]=!0:this["isValidateName_"+a]=!1},closeDiaLog:function(){this.$emit("close-form")},standbyDbDialog:function(a){const s=this;this.standbyDbFormVisible=!1;let r={db_id:a};s.loading=!0,s.master_db=s.databaseInfo,e.getDBHostList(r).then((function(i){if(0===i.length)return s.loading=!1,s.$message({type:"warning",message:s.$t("createStreamReplicationCluster.shujuku-suozai-m")});s.curHostOptions=i;let n=i.find((e=>e.mem_size>=64&&1==e.state));null==n&&(n=s.curHostOptions[0]),s.memMax=n.mem_size,null!=n.cpu&&(s.cupMemMax=n.cpu);let o="";for(let e in s.curHostOptions)if(0===s.curHostOptions[e].is_using&&s.curHostOptions[e].mem_size>=64&&1===s.curHostOptions[e].state){o=s.curHostOptions[e].ip;break}let l=[];for(let e in s.master_db.tblspc_dir){let a={old_dir:s.master_db.tblspc_dir[e].old_dir,new_dir:s.master_db.tblspc_dir[e].new_dir,check:!1};l.push(a)}if(s.standbyDbForm={up_db_id:a,instance_type:"physical",sync:"1",tblspc_dir:l,host:o,other_param:"-P -Xs",db_user:s.pgUser,repl_user:s.master_db.repl_user,repl_pass:t.FromDbText(s.master_db.repl_pass),db_id:s.master_db.db_id,shared_buffers:s.master_db.mem_size},s.master_db.cluster_id>0?(s.standbyDbForm.port=s.master_db.port,s.savePort=s.master_db.port):s.master_db.port&&(s.savePort=s.master_db.port),0==s.master_db.tblspc_dir.length&&s.standbyDbForm.tblspc_dir.push({old_dir:"",new_dir:"",check:!0}),null!=s.standbyDbForm.mem_size&&null!=s.standbyDbForm.mem_size||(s.standbyDbForm.mem_size=64),s.memMax<64)return s.$message({type:"error",message:s.$t("createDatabasePage.gaizhuji-shengyu-message")});11==s.databaseInfo.db_type&&11==s.databaseInfo.cluster_type&&(s.showtype=!0,s.standbyDbForm.other_param="-X stream --progress --write-recovery-conf -v"),e.getDbInfo(r).then((function(e){s.loading=!1,s.src_db=e,s.standbyDbForm.primary_repl_ip=s.src_db.repl_ip}),(function(e){s.loading=!1}))}),(function(e){s.loading=!1}))},buildStandbyDbSubmit:function(){const e=this;!0!==e.isValidateName_standby?this.$refs.standbyDbForm.validate((a=>{a&&e.submitFunc({})})):e.$message({type:"error",message:this.$t("defineDatabasePage.mingcheng-yibei-shiyong")})},submitFunc(a){const s=this;s.$emit("refresh-form");let r=Object.assign({},this.standbyDbForm);if(r.tblspc_dir.length>1){for(let e=0;e<r.tblspc_dir.length;e++)if(""==r.tblspc_dir[e].old_dir&&""==r.tblspc_dir[e].new_dir)r.tblspc_dir.splice(e,1),e--;else if(""!=r.tblspc_dir[e].old_dir&&""==r.tblspc_dir[e].new_dir||""==r.tblspc_dir[e].old_dir&&""!=r.tblspc_dir[e].new_dir)return void s.$message({type:"error",message:this.$t("createStandbyPage.biaokongjian-xinjiu-message")})}else if(1==r.tblspc_dir.length)if(""==r.tblspc_dir[0].old_dir&&""==r.tblspc_dir[0].new_dir)r.tblspc_dir.splice(0,1);else if(""!=r.tblspc_dir[0].old_dir&&""==r.tblspc_dir[0].new_dir||""==r.tblspc_dir[0].old_dir&&""!=r.tblspc_dir[0].new_dir)return void s.$message({type:"error",message:this.$t("createStandbyPage.biaokongjian-xinjiu-message")});s.loading=!0,r.repl_pass=t.ToDbText(r.repl_pass),r=Object.assign({},r,a),s.showtype?"standby"==s.spareDataType?e.buildPolarStandby(r).then((function(e){s.standbyDbFormVisible=!1,s.$emit("close-form"),console.log(e),e.task_id&&s.$emit("open-task",e.task_id)}),(function(e){s.loading=!1,s.$emit("down-form")})):e.buildPolarReader(r).then((function(e){s.standbyDbFormVisible=!1,s.$emit("close-form"),console.log(e),e.task_id&&s.$emit("open-task",e.task_id)}),(function(e){s.loading=!1,s.$emit("down-form")})):(r.primary_port=s.master_db.port,e.buildStandby(r).then((function(e){s.standbyDbFormVisible=!1,s.$emit("close-form"),console.log(e),e.task_id&&s.$emit("open-task",e.task_id)}),(function(e){s.loading=!1,s.$emit("down-form")})))}}},(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{overflow:"hidden"},attrs:{"element-loading-text":e.standbyDbFormVisible?e.$t("createStandbyPage.zhengzai-chuangjianzhong"):e.$t("Public.ping-ming-jia-zai-zhong")}},[t("el-col",{attrs:{span:24}},[t("el-form",{ref:"standbyDbForm",attrs:{model:e.standbyDbForm,"label-width":"160px",rules:e.standbyDbFormRules}},[t("el-divider",[e._v(e._s(e.$t("createStandbyPage.yuanku-xinxi")))]),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{probe:"src_repl_ip",label:e.$t("createStandbyPage.yunku-fuzhi-ip")}},[t("el-input",{attrs:{disabled:""},model:{value:e.src_db.repl_ip,callback:function(a){e.$set(e.src_db,"repl_ip",a)},expression:"src_db.repl_ip"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("createStandbyPage.yuanku-duankou"),prop:"src_port"}},[t("el-input",{attrs:{disabled:""},model:{value:e.src_db.port,callback:function(a){e.$set(e.src_db,"port",e._n(a))},expression:"src_db.port"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("createDatabasePage.shujuku-ruanjian"),prop:"src_pg_bin_path"}},[t("el-input",{attrs:{disabled:""},model:{value:e.src_db.pg_bin_path,callback:function(a){e.$set(e.src_db,"pg_bin_path",a)},expression:"src_db.pg_bin_path"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("licManager.ban-ben"),prop:"src_version"}},[t("el-input",{attrs:{disabled:""},model:{value:e.src_db.version,callback:function(a){e.$set(e.src_db,"version",a)},expression:"src_db.version"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[e.master_db.repl_user?t("el-form-item",{attrs:{label:e.$t("createStandbyPage.liufuzhi-yonghu")}},[t("el-input",{attrs:{placeholder:e.master_db.repl_user,disabled:""},model:{value:e.standbyDbForm.repl_user,callback:function(a){e.$set(e.standbyDbForm,"repl_user",a)},expression:"standbyDbForm.repl_user"}})],1):t("el-form-item",{attrs:{label:e.$t("createStandbyPage.liufuzhi-yonghu"),prop:"repl_user"}},[t("el-input",{attrs:{placeholder:e.$t("createStandbyPage.qingshuru-zhuku-message")},model:{value:e.standbyDbForm.repl_user,callback:function(a){e.$set(e.standbyDbForm,"repl_user",a)},expression:"standbyDbForm.repl_user"}})],1)],1),t("el-col",{attrs:{span:12}},[e.master_db.repl_pass?t("el-form-item",{attrs:{label:e.$t("createStandbyPage.liufuzhi-mima")}},[t("el-input",{attrs:{"show-password":"",placeholder:e.master_db.repl_pass,disabled:""},model:{value:e.standbyDbForm.repl_pass,callback:function(a){e.$set(e.standbyDbForm,"repl_pass",a)},expression:"standbyDbForm.repl_pass"}})],1):t("el-form-item",{attrs:{label:e.$t("createStandbyPage.liufuzhi-mima"),prop:"repl_pass"}},[t("el-input",{attrs:{"show-password":"",placeholder:e.$t("createStandbyPage.qingshuru-zhuku-mima-message")},model:{value:e.standbyDbForm.repl_pass,callback:function(a){e.$set(e.standbyDbForm,"repl_pass",a)},expression:"standbyDbForm.repl_pass"}})],1)],1)],1),t("el-divider",[e._v(e._s(e.$t("createStandbyPage.qingshuru-beiku-xinxi")))]),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("dbList.shujuku-leixing"),prop:"instance_type"}},[t("el-radio",{attrs:{label:"physical",value:"physical"},model:{value:e.standbyDbForm.instance_type,callback:function(a){e.$set(e.standbyDbForm,"instance_type",a)},expression:"standbyDbForm.instance_type"}},[e._v(e._s(e.$t("createDatabasePage.duli-leixing"))+" ")])],1)],1),e.showtype?t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("createStandbyPage.beiku-leixing")}},[t("el-radio",{attrs:{label:"standby",value:"standby"},model:{value:e.spareDataType,callback:function(a){e.spareDataType=a},expression:"spareDataType"}},[e._v("standby ")]),t("el-radio",{attrs:{label:"reader",value:"reader"},model:{value:e.spareDataType,callback:function(a){e.spareDataType=a},expression:"spareDataType"}},[e._v("reader ")])],1)],1):e._e()],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("createStandbyPage.xuanze-beiku-zhuji"),prop:"host"}},[t("el-select",{staticStyle:{width:"250px"},attrs:{filterable:"",placeholder:e.$t("createStandbyPage.qingxuanze-beiku-zhuji")},on:{change:e.changeStandByIP},model:{value:e.standbyDbForm.host,callback:function(a){e.$set(e.standbyDbForm,"host",a)},expression:"standbyDbForm.host"}},e._l(e.curHostOptions,(function(a){return t("el-option",{key:a.hid,attrs:{label:a.ip,value:a.ip,disabled:1!==a.state||1===a.is_using||a.ip==e.standbyDbForm.primary_repl_ip||a.mem_size<64}},[t("span",{staticStyle:{float:"left"}},[e._v(e._s(a.ip))]),t("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(a.hostname))])])})),1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{class:{"is-error":e.isValidateName_standby},attrs:{label:e.$t("createStandbyPage.shuru-beiku-migncheng"),prop:"instance_name"}},[t("div",{staticClass:"demo-input-suffix"},[t("el-tooltip",{staticClass:"item",attrs:{disabled:"en"!=e.language,"open-delay":800,effect:"dark",content:e.$t("createStandbyPage.qingshuru-beiku-shuju-message"),placement:"top-start"}},[t("el-input",{attrs:{placeholder:e.$t("createStandbyPage.qingshuru-beiku-shuju-message")},on:{change:function(a){return e.validateNameFn(e.standbyDbForm.instance_name,"standby")}},model:{value:e.standbyDbForm.instance_name,callback:function(a){e.$set(e.standbyDbForm,"instance_name",a)},expression:"standbyDbForm.instance_name"}},[e.isValidateName_standby?t("i",{staticClass:"red el-input__icon el-icon-error",staticStyle:{"font-size":"14px"},attrs:{slot:"suffix"},slot:"suffix"}):e._e()])],1)],1),e.isValidateName_standby?t("div",{staticClass:"el-form-item__error"},[e._v(e._s(e.$t("defineDatabasePage.yibei-shiyong-message")))]):e._e()])],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("createStandbyPage.beiku-fuzhi-ip"),prop:"repl_ip"}},[t("el-input",{attrs:{placeholder:e.$t("createStandbyPage.qingshuru-beiku-fuzhi-ip")},model:{value:e.standbyDbForm.repl_ip,callback:function(a){e.$set(e.standbyDbForm,"repl_ip",a)},expression:"standbyDbForm.repl_ip"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{directives:[{name:"loading",rawName:"v-loading",value:e.loading_port,expression:"loading_port"}],attrs:{"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0)",label:e.$t("createStandbyPage.beiku-duankou"),prop:"port"}},[t("el-input",{attrs:{placeholder:e.$t("defineDatabasePage.qingshuru-duankou"),disabled:e.master_db.cluster_id>0},model:{value:e.standbyDbForm.port,callback:function(a){e.$set(e.standbyDbForm,"port",e._n(a))},expression:"standbyDbForm.port"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:9}},[t("el-form-item",{attrs:{label:e.$t("createDatabasePage.shujuku-ruanjian"),prop:"pg_bin_path"}},[t("el-select",{staticStyle:{width:"100%",float:"left"},attrs:{filterable:"","allow-create":"","default-first-option":"",placeholder:e.$t("createDatabasePage.qingxuanze-shujuku-ruanjian")},model:{value:e.standbyDbForm.pg_bin_path,callback:function(a){e.$set(e.standbyDbForm,"pg_bin_path",a)},expression:"standbyDbForm.pg_bin_path"}},e._l(e.pg_bin_path_list,(function(a){return t("el-option",{key:a,attrs:{label:a,value:a}},[t("el-tooltip",{staticClass:"item",attrs:{"open-delay":1e3,placement:"top",effect:"dark",content:e.$t("createStandbyPage.shujuku-ruanjian-lujing")}},[t("div",{staticStyle:{overlow:"hiedden"}},[t("span",{staticStyle:{float:"left"}},[e._v(e._s(a))])])])],1)})),1)],1)],1),t("el-col",{attrs:{span:3}},[t("el-form-item",{attrs:{label:e.$t("licManager.ban-ben"),"label-width":"60px",prop:"version"}},[t("el-input",{directives:[{name:"loading",rawName:"v-loading",value:e.loading_version,expression:"loading_version"}],staticStyle:{width:"100%",float:"left"},attrs:{"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0)",disabled:""},model:{value:e.standbyDbForm.version,callback:function(a){e.$set(e.standbyDbForm,"version",a)},expression:"standbyDbForm.version"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{directives:[{name:"loading",rawName:"v-loading",value:e.loading_pgdata,expression:"loading_pgdata"}],attrs:{"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0)",label:e.$t("defineDatabasePage.shuju-mulu"),prop:"pgdata"}},[t("el-input",{attrs:{placeholder:e.$t("defineDatabasePage.shuju-mulu-placeholder")},model:{value:e.standbyDbForm.pgdata,callback:function(a){e.$set(e.standbyDbForm,"pgdata",a)},expression:"standbyDbForm.pgdata"}})],1)],1)],1),t("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingOsInfo,expression:"loadingOsInfo"}],attrs:{"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0)"}},["docker"!==e.standbyDbForm.instance_type?t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("createDatabasePage.caozuo-xitong-yonghu"),prop:"os_user"}},[t("el-input",{attrs:{placeholder:e.$t("createDatabasePage.yunxing-shujuku-yonghu-message")},model:{value:e.standbyDbForm.os_user,callback:function(a){e.$set(e.standbyDbForm,"os_user",a)},expression:"standbyDbForm.os_user"}})],1)],1):e._e(),"docker"!==e.standbyDbForm.instance_type?t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:e.$t("createDatabasePage.chuangjian-caozuoxitong-yonghu"),prop:"create_os_user"}},[t("el-switch",{attrs:{disabled:""},model:{value:e.standbyDbForm.create_os_user,callback:function(a){e.$set(e.standbyDbForm,"create_os_user",a)},expression:"standbyDbForm.create_os_user"}})],1)],1):e._e(),"docker"!==e.standbyDbForm.instance_type?t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:e.$t("createDatabasePage.caozuoxitong-yonghu-UID"),prop:"os_uid"}},[t("el-input",{attrs:{placeholder:e.$t("createDatabasePage.shuru-yonghu-UID"),disabled:e.os_uid_disabled},model:{value:e.standbyDbForm.os_uid,callback:function(a){e.$set(e.standbyDbForm,"os_uid",e._n(a))},expression:"standbyDbForm.os_uid"}})],1)],1):e._e()],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("createStandbyPage.yanchi-shijian"),prop:"delay"}},[t("el-input",{attrs:{placeholder:e.$t("createStandbyPage.yanchi-beiku-message")},model:{value:e.standbyDbForm.delay,callback:function(a){e.$set(e.standbyDbForm,"delay",e._n(a))},expression:"standbyDbForm.delay"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"other_param",prop:"other_param"}},[t("el-input",{attrs:{placeholder:e.$t("createStandbyPage.qingshuru-other_param")},model:{value:e.standbyDbForm.other_param,callback:function(a){e.$set(e.standbyDbForm,"other_param",e._n(a))},expression:"standbyDbForm.other_param"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},["docker"===e.standbyDbForm.instance_type?t("el-form-item",{attrs:{label:e.$t("createDatabasePage.CPU-heshu"),prop:"cpu"}},[t("el-slider",{attrs:{"show-input":"",min:1,max:e.cupMemMax},model:{value:e.standbyDbForm.cpu,callback:function(a){e.$set(e.standbyDbForm,"cpu",e._n(a))},expression:"standbyDbForm.cpu"}})],1):e._e()],1),t("el-col",{attrs:{span:12}},["docker"===e.standbyDbForm.instance_type?t("el-form-item",{attrs:{label:e.$t("createStandbyPage.neicun-daxi"),prop:"shared_buffers"}},[t("el-slider",{attrs:{"aria-placeholder":e.master_db.shared_buffers,"show-input":"",min:64,max:e.memMax,disabled:null!=e.master_db.shared_buffers&&null!=e.master_db.shared_buffers||e.memMax<64},model:{value:e.standbyDbForm.shared_buffers,callback:function(a){e.$set(e.standbyDbForm,"shared_buffers",e._n(a))},expression:"standbyDbForm.shared_buffers"}},[e._v(" >")])],1):e._e()],1)],1),t("el-row",{staticStyle:{color:"#606266","font-weight":"700","margin-bottom":"10px"}},[t("el-col",{staticStyle:{"padding-left":"40px","font-size":"12px"},attrs:{span:24}},[e._v(" "+e._s(e.$t("createStandbyPage.biaokongjian-mulu-yingshe"))+" ")]),e._l(e.standbyDbForm.tblspc_dir,(function(a,s){return t("el-row",{key:s},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("createStandbyPage.jiu-mu-lu"),prop:"tblspc_dir."+s+".old_dir",rules:e.standbyDbFormRules.old_dir}},[t("el-input",{attrs:{disabled:"",placeholder:e.$t("createStandbyPage.shuru-jinbiao-message")},model:{value:a.old_dir,callback:function(t){e.$set(a,"old_dir",t)},expression:"item.old_dir"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("createStandbyPage.xin-mu-lu"),prop:"tblspc_dir."+s+".new_dir",rules:e.standbyDbFormRules.new_dir}},[t("el-input",{attrs:{placeholder:e.$t("createStandbyPage.qingshu-xinbiao-message")},model:{value:a.new_dir,callback:function(t){e.$set(a,"new_dir",t)},expression:"item.new_dir"}})],1)],1)],1)}))],2)],1),t("div",{staticClass:"dialog-footer",staticStyle:{float:"right","marign-top":"10px"}},[t("el-button",{nativeOn:{click:function(a){return e.closeDiaLog(a)}}},[e._v(e._s(e.$t("index.qu-xiao")))]),t("el-button",{attrs:{type:"primary",disabled:e.memMax<64&&1==e.master_db.table_space},on:{click:e.buildStandbyDbSubmit}},[e._v(e._s(e.$t("defineDatabasePage.ti-jiao")))])],1)],1)],1)}),[],!1,l,"1f96c8d6",null,null);function l(e){for(let a in n)this[a]=n[a]}var d=function(){return o.exports}();export{d as default};
